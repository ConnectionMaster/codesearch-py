{
  "elapsed_ms": 30, 
  "file_info_response": [
    {
      "file_info": {
        "gob_info": {
          "repo": "chromium/chromium/src", 
          "commit": "bf6aa1f36a7a6ddf045204e92c329dec39983369", 
          "path": "base/metrics/field_trial.h"
        }, 
        "name": "src/base/metrics/field_trial.h", 
        "language": "c++", 
        "changelist_num": "bf6aa1f36a7a6ddf045204e92c329dec39983369", 
        "package_name": "chromium", 
        "lines": "821", 
        "content": {
          "text": "// Copyright (c) 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// FieldTrial is a class for handling details of statistical experiments\n// performed by actual users in the field (i.e., in a shipped or beta product).\n// All code is called exclusively on the UI thread currently.\n//\n// The simplest example is an experiment to see whether one of two options\n// produces \"better\" results across our user population.  In that scenario, UMA\n// data is uploaded to aggregate the test results, and this FieldTrial class\n// manages the state of each such experiment (state == which option was\n// pseudo-randomly selected).\n//\n// States are typically generated randomly, either based on a one time\n// randomization (which will yield the same results, in terms of selecting\n// the client for a field trial or not, for every run of the program on a\n// given machine), or by a session randomization (generated each time the\n// application starts up, but held constant during the duration of the\n// process).\n\n//------------------------------------------------------------------------------\n// Example:  Suppose we have an experiment involving memory, such as determining\n// the impact of some pruning algorithm.\n// We assume that we already have a histogram of memory usage, such as:\n\n//   UMA_HISTOGRAM_COUNTS_1M(\"Memory.RendererTotal\", count);\n\n// Somewhere in main thread initialization code, we'd probably define an\n// instance of a FieldTrial, with code such as:\n\n// // FieldTrials are reference counted, and persist automagically until\n// // process teardown, courtesy of their automatic registration in\n// // FieldTrialList.\n// // Note: This field trial will run in Chrome instances compiled through\n// //       8 July, 2015, and after that all instances will be in \"StandardMem\".\n// scoped_refptr<base::FieldTrial> trial(\n//     base::FieldTrialList::FactoryGetFieldTrial(\n//         \"MemoryExperiment\", 1000, \"StandardMem\", 2015, 7, 8,\n//         base::FieldTrial::ONE_TIME_RANDOMIZED, NULL));\n//\n// const int high_mem_group =\n//     trial->AppendGroup(\"HighMem\", 20);  // 2% in HighMem group.\n// const int low_mem_group =\n//     trial->AppendGroup(\"LowMem\", 20);   // 2% in LowMem group.\n// // Take action depending of which group we randomly land in.\n// if (trial->group() == high_mem_group)\n//   SetPruningAlgorithm(kType1);  // Sample setting of browser state.\n// else if (trial->group() == low_mem_group)\n//   SetPruningAlgorithm(kType2);  // Sample alternate setting.\n\n//------------------------------------------------------------------------------\n\n#ifndef BASE_METRICS_FIELD_TRIAL_H_\n#define BASE_METRICS_FIELD_TRIAL_H_\n\n#include <stddef.h>\n#include <stdint.h>\n\n#include <map>\n#include <memory>\n#include <set>\n#include <string>\n#include <vector>\n\n#include \"base/atomicops.h\"\n#include \"base/base_export.h\"\n#include \"base/command_line.h\"\n#include \"base/feature_list.h\"\n#include \"base/files/file.h\"\n#include \"base/gtest_prod_util.h\"\n#include \"base/macros.h\"\n#include \"base/memory/read_only_shared_memory_region.h\"\n#include \"base/memory/ref_counted.h\"\n#include \"base/memory/shared_memory_mapping.h\"\n#include \"base/metrics/persistent_memory_allocator.h\"\n#include \"base/observer_list_threadsafe.h\"\n#include \"base/pickle.h\"\n#include \"base/process/launch.h\"\n#include \"base/strings/string_piece.h\"\n#include \"base/synchronization/lock.h\"\n#include \"base/time/time.h\"\n#include \"build/build_config.h\"\n\n#if defined(OS_MACOSX) && !defined(OS_IOS)\n#include \"base/mac/mach_port_rendezvous.h\"\n#endif\n\nnamespace base {\n\nclass FieldTrialList;\n\nclass BASE_EXPORT FieldTrial : public RefCounted<FieldTrial> {\n public:\n  typedef int Probability;  // Probability type for being selected in a trial.\n\n  // Specifies the persistence of the field trial group choice.\n  enum RandomizationType {\n    // One time randomized trials will persist the group choice between\n    // restarts, which is recommended for most trials, especially those that\n    // change user visible behavior.\n    ONE_TIME_RANDOMIZED,\n    // Session randomized trials will roll the dice to select a group on every\n    // process restart.\n    SESSION_RANDOMIZED,\n  };\n\n  // EntropyProvider is an interface for providing entropy for one-time\n  // randomized (persistent) field trials.\n  class BASE_EXPORT EntropyProvider {\n   public:\n    virtual ~EntropyProvider();\n\n    // Returns a double in the range of [0, 1) to be used for the dice roll for\n    // the specified field trial. If |randomization_seed| is not 0, it will be\n    // used in preference to |trial_name| for generating the entropy by entropy\n    // providers that support it. A given instance should always return the same\n    // value given the same input |trial_name| and |randomization_seed| values.\n    virtual double GetEntropyForTrial(const std::string& trial_name,\n                                      uint32_t randomization_seed) const = 0;\n  };\n\n  // A pair representing a Field Trial and its selected group.\n  struct ActiveGroup {\n    std::string trial_name;\n    std::string group_name;\n  };\n\n  // A triplet representing a FieldTrial, its selected group and whether it's\n  // active. String members are pointers to the underlying strings owned by the\n  // FieldTrial object. Does not use StringPiece to avoid conversions back to\n  // std::string.\n  struct BASE_EXPORT State {\n    const std::string* trial_name = nullptr;\n    const std::string* group_name = nullptr;\n    bool activated = false;\n\n    State();\n    State(const State& other);\n    ~State();\n  };\n\n  // We create one FieldTrialEntry per field trial in shared memory, via\n  // AddToAllocatorWhileLocked. The FieldTrialEntry is followed by a\n  // base::Pickle object that we unpickle and read from.\n  struct BASE_EXPORT FieldTrialEntry {\n    // SHA1(FieldTrialEntry): Increment this if structure changes!\n    static constexpr uint32_t kPersistentTypeId = 0xABA17E13 + 2;\n\n    // Expected size for 32/64-bit check.\n    static constexpr size_t kExpectedInstanceSize = 8;\n\n    // Whether or not this field trial is activated. This is really just a\n    // boolean but using a 32 bit value for portability reasons. It should be\n    // accessed via NoBarrier_Load()/NoBarrier_Store() to prevent the compiler\n    // from doing unexpected optimizations because it thinks that only one\n    // thread is accessing the memory location.\n    subtle::Atomic32 activated;\n\n    // Size of the pickled structure, NOT the total size of this entry.\n    uint32_t pickle_size;\n\n    // Calling this is only valid when the entry is initialized. That is, it\n    // resides in shared memory and has a pickle containing the trial name and\n    // group name following it.\n    bool GetTrialAndGroupName(StringPiece* trial_name,\n                              StringPiece* group_name) const;\n\n    // Calling this is only valid when the entry is initialized as well. Reads\n    // the parameters following the trial and group name and stores them as\n    // key-value mappings in |params|.\n    bool GetParams(std::map<std::string, std::string>* params) const;\n\n   private:\n    // Returns an iterator over the data containing names and params.\n    PickleIterator GetPickleIterator() const;\n\n    // Takes the iterator and writes out the first two items into |trial_name|\n    // and |group_name|.\n    bool ReadStringPair(PickleIterator* iter,\n                        StringPiece* trial_name,\n                        StringPiece* group_name) const;\n  };\n\n  typedef std::vector<ActiveGroup> ActiveGroups;\n\n  // A return value to indicate that a given instance has not yet had a group\n  // assignment (and hence is not yet participating in the trial).\n  static const int kNotFinalized;\n\n  // Disables this trial, meaning it always determines the default group\n  // has been selected. May be called immediately after construction, or\n  // at any time after initialization (should not be interleaved with\n  // AppendGroup calls). Once disabled, there is no way to re-enable a\n  // trial.\n  // TODO(mad): http://code.google.com/p/chromium/issues/detail?id=121446\n  // This doesn't properly reset to Default when a group was forced.\n  void Disable();\n\n  // Establish the name and probability of the next group in this trial.\n  // Sometimes, based on construction randomization, this call may cause the\n  // provided group to be *THE* group selected for use in this instance.\n  // The return value is the group number of the new group.\n  int AppendGroup(const std::string& name, Probability group_probability);\n\n  // Return the name of the FieldTrial (excluding the group name).\n  const std::string& trial_name() const { return trial_name_; }\n\n  // Return the randomly selected group number that was assigned, and notify\n  // any/all observers that this finalized group number has presumably been used\n  // (queried), and will never change. Note that this will force an instance to\n  // participate, and make it illegal to attempt to probabilistically add any\n  // other groups to the trial.\n  int group();\n\n  // If the group's name is empty, a string version containing the group number\n  // is used as the group name. This causes a winner to be chosen if none was.\n  const std::string& group_name();\n\n  // Finalizes the group choice and returns the chosen group, but does not mark\n  // the trial as active - so its state will not be reported until group_name()\n  // or similar is called.\n  const std::string& GetGroupNameWithoutActivation();\n\n  // Set the field trial as forced, meaning that it was setup earlier than\n  // the hard coded registration of the field trial to override it.\n  // This allows the code that was hard coded to register the field trial to\n  // still succeed even though the field trial has already been registered.\n  // This must be called after appending all the groups, since we will make\n  // the group choice here. Note that this is a NOOP for already forced trials.\n  // And, as the rest of the FieldTrial code, this is not thread safe and must\n  // be done from the UI thread.\n  void SetForced();\n\n  // Enable benchmarking sets field trials to a common setting.\n  static void EnableBenchmarking();\n\n  // Creates a FieldTrial object with the specified parameters, to be used for\n  // simulation of group assignment without actually affecting global field\n  // trial state in the running process. Group assignment will be done based on\n  // |entropy_value|, which must have a range of [0, 1).\n  //\n  // Note: Using this function will not register the field trial globally in the\n  // running process - for that, use FieldTrialList::FactoryGetFieldTrial().\n  //\n  // The ownership of the returned FieldTrial is transfered to the caller which\n  // is responsible for deref'ing it (e.g. by using scoped_refptr<FieldTrial>).\n  static FieldTrial* CreateSimulatedFieldTrial(\n      const std::string& trial_name,\n      Probability total_probability,\n      const std::string& default_group_name,\n      double entropy_value);\n\n private:\n  // Allow tests to access our innards for testing purposes.\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, Registration);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, AbsoluteProbabilities);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, RemainingProbability);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, FiftyFiftyProbability);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, MiddleProbabilities);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, OneWinner);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, DisableProbability);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, ActiveGroups);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, AllGroups);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, ActiveGroupsNotFinalized);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, Save);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, SaveAll);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, DuplicateRestore);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, SetForcedTurnFeatureOff);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, SetForcedTurnFeatureOn);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, SetForcedChangeDefault_Default);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, SetForcedChangeDefault_NonDefault);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, FloatBoundariesGiveEqualGroupSizes);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialTest, DoesNotSurpassTotalProbability);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest,\n                           DoNotAddSimulatedFieldTrialsToAllocator);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, ClearParamsFromSharedMemory);\n\n  friend class base::FieldTrialList;\n\n  friend class RefCounted<FieldTrial>;\n\n  using FieldTrialRef = PersistentMemoryAllocator::Reference;\n\n  // This is the group number of the 'default' group when a choice wasn't forced\n  // by a call to FieldTrialList::CreateFieldTrial. It is kept private so that\n  // consumers don't use it by mistake in cases where the group was forced.\n  static const int kDefaultGroupNumber;\n\n  // Creates a field trial with the specified parameters. Group assignment will\n  // be done based on |entropy_value|, which must have a range of [0, 1).\n  FieldTrial(const std::string& trial_name,\n             Probability total_probability,\n             const std::string& default_group_name,\n             double entropy_value);\n  virtual ~FieldTrial();\n\n  // Return the default group name of the FieldTrial.\n  std::string default_group_name() const { return default_group_name_; }\n\n  // Marks this trial as having been registered with the FieldTrialList. Must be\n  // called no more than once and before any |group()| calls have occurred.\n  void SetTrialRegistered();\n\n  // Sets the chosen group name and number.\n  void SetGroupChoice(const std::string& group_name, int number);\n\n  // Ensures that a group is chosen, if it hasn't yet been. The field trial\n  // might yet be disabled, so this call will *not* notify observers of the\n  // status.\n  void FinalizeGroupChoice();\n\n  // Implements FinalizeGroupChoice() with the added flexibility of being\n  // deadlock-free if |is_locked| is true and the caller is holding a lock.\n  void FinalizeGroupChoiceImpl(bool is_locked);\n\n  // Returns the trial name and selected group name for this field trial via\n  // the output parameter |active_group|, but only if the group has already\n  // been chosen and has been externally observed via |group()| and the trial\n  // has not been disabled. In that case, true is returned and |active_group|\n  // is filled in; otherwise, the result is false and |active_group| is left\n  // untouched.\n  bool GetActiveGroup(ActiveGroup* active_group) const;\n\n  // Returns the trial name and selected group name for this field trial via\n  // the output parameter |field_trial_state| for all the studies when\n  // |bool include_expired| is true. In case when |bool include_expired| is\n  // false, if the trial has not been disabled true is returned and\n  // |field_trial_state| is filled in; otherwise, the result is false and\n  // |field_trial_state| is left untouched.\n  // This function is deadlock-free if the caller is holding a lock.\n  bool GetStateWhileLocked(State* field_trial_state, bool include_expired);\n\n  // Returns the group_name. A winner need not have been chosen.\n  std::string group_name_internal() const { return group_name_; }\n\n  // The name of the field trial, as can be found via the FieldTrialList.\n  const std::string trial_name_;\n\n  // The maximum sum of all probabilities supplied, which corresponds to 100%.\n  // This is the scaling factor used to adjust supplied probabilities.\n  const Probability divisor_;\n\n  // The name of the default group.\n  const std::string default_group_name_;\n\n  // The randomly selected probability that is used to select a group (or have\n  // the instance not participate).  It is the product of divisor_ and a random\n  // number between [0, 1).\n  Probability random_;\n\n  // Sum of the probabilities of all appended groups.\n  Probability accumulated_group_probability_;\n\n  // The number that will be returned by the next AppendGroup() call.\n  int next_group_number_;\n\n  // The pseudo-randomly assigned group number.\n  // This is kNotFinalized if no group has been assigned.\n  int group_;\n\n  // A textual name for the randomly selected group. Valid after |group()|\n  // has been called.\n  std::string group_name_;\n\n  // When enable_field_trial_ is false, field trial reverts to the 'default'\n  // group.\n  bool enable_field_trial_;\n\n  // When forced_ is true, we return the chosen group from AppendGroup when\n  // appropriate.\n  bool forced_;\n\n  // Specifies whether the group choice has been reported to observers.\n  bool group_reported_;\n\n  // Whether this trial is registered with the global FieldTrialList and thus\n  // should notify it when its group is queried.\n  bool trial_registered_;\n\n  // Reference to related field trial struct and data in shared memory.\n  FieldTrialRef ref_;\n\n  // When benchmarking is enabled, field trials all revert to the 'default'\n  // group.\n  static bool enable_benchmarking_;\n\n  DISALLOW_COPY_AND_ASSIGN(FieldTrial);\n};\n\n//------------------------------------------------------------------------------\n// Class with a list of all active field trials.  A trial is active if it has\n// been registered, which includes evaluating its state based on its probaility.\n// Only one instance of this class exists and outside of testing, will live for\n// the entire life time of the process.\nclass BASE_EXPORT FieldTrialList {\n public:\n  using FieldTrialAllocator = PersistentMemoryAllocator;\n\n  // Type for function pointer passed to |AllParamsToString| used to escape\n  // special characters from |input|.\n  typedef std::string (*EscapeDataFunc)(const std::string& input);\n\n  // Year that is guaranteed to not be expired when instantiating a field trial\n  // via |FactoryGetFieldTrial()|.  Set to two years from the build date.\n  static int kNoExpirationYear;\n\n  // Observer is notified when a FieldTrial's group is selected.\n  class BASE_EXPORT Observer {\n   public:\n    // Notify observers when FieldTrials's group is selected.\n    virtual void OnFieldTrialGroupFinalized(const std::string& trial_name,\n                                            const std::string& group_name) = 0;\n\n   protected:\n    virtual ~Observer();\n  };\n\n  // This singleton holds the global list of registered FieldTrials.\n  //\n  // To support one-time randomized field trials, specify a non-null\n  // |entropy_provider| which should be a source of uniformly distributed\n  // entropy values. If one time randomization is not desired, pass in null for\n  // |entropy_provider|.\n  explicit FieldTrialList(\n      std::unique_ptr<const FieldTrial::EntropyProvider> entropy_provider);\n\n  // Destructor Release()'s references to all registered FieldTrial instances.\n  ~FieldTrialList();\n\n  // Get a FieldTrial instance from the factory.\n  //\n  // |name| is used to register the instance with the FieldTrialList class,\n  // and can be used to find the trial (only one trial can be present for each\n  // name). |default_group_name| is the name of the default group which will\n  // be chosen if none of the subsequent appended groups get to be chosen.\n  // |default_group_number| can receive the group number of the default group as\n  // AppendGroup returns the number of the subsequence groups. |trial_name| and\n  // |default_group_name| may not be empty but |default_group_number| can be\n  // NULL if the value is not needed.\n  //\n  // Group probabilities that are later supplied must sum to less than or equal\n  // to the |total_probability|. Arguments |year|, |month| and |day_of_month|\n  // specify the expiration time. If the build time is after the expiration time\n  // then the field trial reverts to the 'default' group.\n  //\n  // Use this static method to get a startup-randomized FieldTrial or a\n  // previously created forced FieldTrial.\n  static FieldTrial* FactoryGetFieldTrial(\n      const std::string& trial_name,\n      FieldTrial::Probability total_probability,\n      const std::string& default_group_name,\n      const int year,\n      const int month,\n      const int day_of_month,\n      FieldTrial::RandomizationType randomization_type,\n      int* default_group_number);\n\n  // Same as FactoryGetFieldTrial(), but allows specifying a custom seed to be\n  // used on one-time randomized field trials (instead of a hash of the trial\n  // name, which is used otherwise or if |randomization_seed| has value 0). The\n  // |randomization_seed| value (other than 0) should never be the same for two\n  // trials, else this would result in correlated group assignments.  Note:\n  // Using a custom randomization seed is only supported by the\n  // NormalizedMurmurHashEntropyProvider, which is used when UMA is not enabled\n  // (and is always used in Android WebView, where UMA is enabled\n  // asyncronously). If |override_entropy_provider| is not null, then it will be\n  // used for randomization instead of the provider given when the\n  // FieldTrialList was instantiated.\n  static FieldTrial* FactoryGetFieldTrialWithRandomizationSeed(\n      const std::string& trial_name,\n      FieldTrial::Probability total_probability,\n      const std::string& default_group_name,\n      const int year,\n      const int month,\n      const int day_of_month,\n      FieldTrial::RandomizationType randomization_type,\n      uint32_t randomization_seed,\n      int* default_group_number,\n      const FieldTrial::EntropyProvider* override_entropy_provider);\n\n  // The Find() method can be used to test to see if a named trial was already\n  // registered, or to retrieve a pointer to it from the global map.\n  static FieldTrial* Find(const std::string& trial_name);\n\n  // Returns the group number chosen for the named trial, or\n  // FieldTrial::kNotFinalized if the trial does not exist.\n  static int FindValue(const std::string& trial_name);\n\n  // Returns the group name chosen for the named trial, or the empty string if\n  // the trial does not exist. The first call of this function on a given field\n  // trial will mark it as active, so that its state will be reported with usage\n  // metrics, crashes, etc.\n  // Note: Direct use of this function and related FieldTrial functions is\n  // generally discouraged - instead please use base::Feature when possible.\n  static std::string FindFullName(const std::string& trial_name);\n\n  // Returns true if the named trial has been registered.\n  static bool TrialExists(const std::string& trial_name);\n\n  // Returns true if the named trial exists and has been activated.\n  static bool IsTrialActive(const std::string& trial_name);\n\n  // Creates a persistent representation of active FieldTrial instances for\n  // resurrection in another process. This allows randomization to be done in\n  // one process, and secondary processes can be synchronized on the result.\n  // The resulting string contains the name and group name pairs of all\n  // registered FieldTrials for which the group has been chosen and externally\n  // observed (via |group()|) and which have not been disabled, with \"/\" used\n  // to separate all names and to terminate the string. This string is parsed\n  // by |CreateTrialsFromString()|.\n  static void StatesToString(std::string* output);\n\n  // Creates a persistent representation of all FieldTrial instances for\n  // resurrection in another process. This allows randomization to be done in\n  // one process, and secondary processes can be synchronized on the result.\n  // The resulting string contains the name and group name pairs of all\n  // registered FieldTrials including disabled based on |include_expired|,\n  // with \"/\" used to separate all names and to terminate the string. All\n  // activated trials have their name prefixed with \"*\". This string is parsed\n  // by |CreateTrialsFromString()|.\n  static void AllStatesToString(std::string* output, bool include_expired);\n\n  // Creates a persistent representation of all FieldTrial params for\n  // resurrection in another process. The returned string contains the trial\n  // name and group name pairs of all registered FieldTrials including disabled\n  // based on |include_expired| separated by '.'. The pair is followed by ':'\n  // separator and list of param name and values separated by '/'. It also takes\n  // |encode_data_func| function pointer for encodeing special charactors.\n  // This string is parsed by |AssociateParamsFromString()|.\n  static std::string AllParamsToString(bool include_expired,\n                                       EscapeDataFunc encode_data_func);\n\n  // Fills in the supplied vector |active_groups| (which must be empty when\n  // called) with a snapshot of all registered FieldTrials for which the group\n  // has been chosen and externally observed (via |group()|) and which have\n  // not been disabled.\n  static void GetActiveFieldTrialGroups(\n      FieldTrial::ActiveGroups* active_groups);\n\n  // Returns the field trials that are marked active in |trials_string|.\n  static void GetActiveFieldTrialGroupsFromString(\n      const std::string& trials_string,\n      FieldTrial::ActiveGroups* active_groups);\n\n  // Returns the field trials that were active when the process was\n  // created. Either parses the field trial string or the shared memory\n  // holding field trial information.\n  // Must be called only after a call to CreateTrialsFromCommandLine().\n  static void GetInitiallyActiveFieldTrials(\n      const base::CommandLine& command_line,\n      FieldTrial::ActiveGroups* active_groups);\n\n  // Use a state string (re: StatesToString()) to augment the current list of\n  // field trials to include the supplied trials, and using a 100% probability\n  // for each trial, force them to have the same group string. This is commonly\n  // used in a non-browser process, to carry randomly selected state in a\n  // browser process into this non-browser process, but could also be invoked\n  // through a command line argument to the browser process. Created field\n  // trials will be marked \"used\" for the purposes of active trial reporting\n  // if they are prefixed with |kActivationMarker|. Trial names in\n  // |ignored_trial_names| are ignored when parsing |trials_string|.\n  static bool CreateTrialsFromString(\n      const std::string& trials_string,\n      const std::set<std::string>& ignored_trial_names);\n\n  // Achieves the same thing as CreateTrialsFromString, except wraps the logic\n  // by taking in the trials from the command line, either via shared memory\n  // handle or command line argument. A bit of a misnomer since on POSIX we\n  // simply get the trials from opening |fd_key| if using shared memory. On\n  // Windows, we expect the |cmd_line| switch for |field_trial_handle_switch| to\n  // contain the shared memory handle that contains the field trial allocator.\n  // We need the |field_trial_handle_switch| and |fd_key| arguments to be passed\n  // in since base/ can't depend on content/.\n  static void CreateTrialsFromCommandLine(const base::CommandLine& cmd_line,\n                                          const char* field_trial_handle_switch,\n                                          int fd_key);\n\n  // Creates base::Feature overrides from the command line by first trying to\n  // use shared memory and then falling back to the command line if it fails.\n  static void CreateFeaturesFromCommandLine(\n      const base::CommandLine& command_line,\n      const char* enable_features_switch,\n      const char* disable_features_switch,\n      FeatureList* feature_list);\n\n#if defined(OS_WIN)\n  // On Windows, we need to explicitly pass down any handles to be inherited.\n  // This function adds the shared memory handle to field trial state to the\n  // list of handles to be inherited.\n  static void AppendFieldTrialHandleIfNeeded(\n      base::HandlesToInheritVector* handles);\n#elif defined(OS_FUCHSIA)\n  // TODO(fuchsia): Implement shared-memory configuration (crbug.com/752368).\n#elif defined(OS_MACOSX) && !defined(OS_IOS)\n  // On Mac, the field trial shared memory is accessed via a Mach server, which\n  // the child looks up directly.\n  static void InsertFieldTrialHandleIfNeeded(\n      MachPortsForRendezvous* rendezvous_ports);\n#elif defined(OS_POSIX) && !defined(OS_NACL)\n  // On POSIX, we also need to explicitly pass down this file descriptor that\n  // should be shared with the child process. Returns -1 if it was not\n  // initialized properly. The current process remains the onwer of the passed\n  // descriptor.\n  static int GetFieldTrialDescriptor();\n#endif\n  static base::ReadOnlySharedMemoryRegion\n  DuplicateFieldTrialSharedMemoryForTesting();\n\n  // Adds a switch to the command line containing the field trial state as a\n  // string (if not using shared memory to share field trial state), or the\n  // shared memory handle + length.\n  // Needs the |field_trial_handle_switch| argument to be passed in since base/\n  // can't depend on content/.\n  static void CopyFieldTrialStateToFlags(const char* field_trial_handle_switch,\n                                         const char* enable_features_switch,\n                                         const char* disable_features_switch,\n                                         base::CommandLine* cmd_line);\n\n  // Create a FieldTrial with the given |name| and using 100% probability for\n  // the FieldTrial, force FieldTrial to have the same group string as\n  // |group_name|. This is commonly used in a non-browser process, to carry\n  // randomly selected state in a browser process into this non-browser process.\n  // It returns NULL if there is a FieldTrial that is already registered with\n  // the same |name| but has different finalized group string (|group_name|).\n  static FieldTrial* CreateFieldTrial(const std::string& name,\n                                      const std::string& group_name);\n\n  // Add an observer to be notified when a field trial is irrevocably committed\n  // to being part of some specific field_group (and hence the group_name is\n  // also finalized for that field_trial). Returns false and does nothing if\n  // there is no FieldTrialList singleton.\n  static bool AddObserver(Observer* observer);\n\n  // Remove an observer.\n  static void RemoveObserver(Observer* observer);\n\n  // Similar to AddObserver(), but the passed observer will be notified\n  // synchronously when a field trial is activated and its group selected. It\n  // will be notified synchronously on the same thread where the activation and\n  // group selection happened. It is the responsibility of the observer to make\n  // sure that this is a safe operation and the operation must be fast, as this\n  // work is done synchronously as part of group() or related APIs. Only a\n  // single such observer is supported, exposed specifically for crash\n  // reporting. Must be called on the main thread before any other threads\n  // have been started.\n  static void SetSynchronousObserver(Observer* observer);\n\n  // Removes the single synchronous observer.\n  static void RemoveSynchronousObserver(Observer* observer);\n\n  // Grabs the lock if necessary and adds the field trial to the allocator. This\n  // should only be called from FinalizeGroupChoice().\n  static void OnGroupFinalized(bool is_locked, FieldTrial* field_trial);\n\n  // Notify all observers that a group has been finalized for |field_trial|.\n  static void NotifyFieldTrialGroupSelection(FieldTrial* field_trial);\n\n  // Return the number of active field trials.\n  static size_t GetFieldTrialCount();\n\n  // Gets the parameters for |field_trial| from shared memory and stores them in\n  // |params|. This is only exposed for use by FieldTrialParamAssociator and\n  // shouldn't be used by anything else.\n  static bool GetParamsFromSharedMemory(\n      FieldTrial* field_trial,\n      std::map<std::string, std::string>* params);\n\n  // Clears all the params in the allocator.\n  static void ClearParamsFromSharedMemoryForTesting();\n\n  // Dumps field trial state to an allocator so that it can be analyzed after a\n  // crash.\n  static void DumpAllFieldTrialsToPersistentAllocator(\n      PersistentMemoryAllocator* allocator);\n\n  // Retrieves field trial state from an allocator so that it can be analyzed\n  // after a crash. The pointers in the returned vector are into the persistent\n  // memory segment and so are only valid as long as the allocator is valid.\n  static std::vector<const FieldTrial::FieldTrialEntry*>\n  GetAllFieldTrialsFromPersistentAllocator(\n      PersistentMemoryAllocator const& allocator);\n\n  // Returns true if a global field trial list is set. Only used for testing.\n  static bool IsGlobalSetForTesting();\n\n private:\n  // Allow tests to access our innards for testing purposes.\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, InstantiateAllocator);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, AddTrialsToAllocator);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest,\n                           DoNotAddSimulatedFieldTrialsToAllocator);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, AssociateFieldTrialParams);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, ClearParamsFromSharedMemory);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest,\n                           SerializeSharedMemoryRegionMetadata);\n  friend int SerializeSharedMemoryRegionMetadata(void);\n  FRIEND_TEST_ALL_PREFIXES(FieldTrialListTest, CheckReadOnlySharedMemoryRegion);\n\n  // Serialization is used to pass information about the handle to child\n  // processes. It passes a reference to the relevant OS resource, and it passes\n  // a GUID. Serialization and deserialization doesn't actually transport the\n  // underlying OS resource - that must be done by the Process launcher.\n  static std::string SerializeSharedMemoryRegionMetadata(\n      const base::ReadOnlySharedMemoryRegion& shm);\n#if defined(OS_WIN) || defined(OS_FUCHSIA) || \\\n    (defined(OS_MACOSX) && !defined(OS_IOS))\n  static base::ReadOnlySharedMemoryRegion DeserializeSharedMemoryRegionMetadata(\n      const std::string& switch_value);\n#elif defined(OS_POSIX) && !defined(OS_NACL)\n  static base::ReadOnlySharedMemoryRegion DeserializeSharedMemoryRegionMetadata(\n      int fd,\n      const std::string& switch_value);\n#endif\n\n#if defined(OS_WIN) || defined(OS_FUCHSIA) || \\\n    (defined(OS_MACOSX) && !defined(OS_IOS))\n  // Takes in |handle_switch| from the command line which represents the shared\n  // memory handle for field trials, parses it, and creates the field trials.\n  // Returns true on success, false on failure.\n  // |switch_value| also contains the serialized GUID.\n  static bool CreateTrialsFromSwitchValue(const std::string& switch_value);\n#elif defined(OS_POSIX) && !defined(OS_NACL)\n  // On POSIX systems that use the zygote, we look up the correct fd that backs\n  // the shared memory segment containing the field trials by looking it up via\n  // an fd key in GlobalDescriptors. Returns true on success, false on failure.\n  // |switch_value| also contains the serialized GUID.\n  static bool CreateTrialsFromDescriptor(int fd_key,\n                                         const std::string& switch_value);\n#endif\n\n  // Takes an unmapped ReadOnlySharedMemoryRegion, maps it with the correct size\n  // and creates field trials via CreateTrialsFromSharedMemoryMapping(). Returns\n  // true if successful and false otherwise.\n  static bool CreateTrialsFromSharedMemoryRegion(\n      const base::ReadOnlySharedMemoryRegion& shm_region);\n\n  // Expects a mapped piece of shared memory |shm_mapping| that was created from\n  // the browser process's field_trial_allocator and shared via the command\n  // line. This function recreates the allocator, iterates through all the field\n  // trials in it, and creates them via CreateFieldTrial(). Returns true if\n  // successful and false otherwise.\n  static bool CreateTrialsFromSharedMemoryMapping(\n      base::ReadOnlySharedMemoryMapping shm_mapping);\n\n  // Instantiate the field trial allocator, add all existing field trials to it,\n  // and duplicates its handle to a read-only handle, which gets stored in\n  // |readonly_allocator_handle|.\n  static void InstantiateFieldTrialAllocatorIfNeeded();\n\n  // Adds the field trial to the allocator. Caller must hold a lock before\n  // calling this.\n  static void AddToAllocatorWhileLocked(PersistentMemoryAllocator* allocator,\n                                        FieldTrial* field_trial);\n\n  // Activate the corresponding field trial entry struct in shared memory.\n  static void ActivateFieldTrialEntryWhileLocked(FieldTrial* field_trial);\n\n  // A map from FieldTrial names to the actual instances.\n  typedef std::map<std::string, FieldTrial*> RegistrationMap;\n\n  // If one-time randomization is enabled, returns a weak pointer to the\n  // corresponding EntropyProvider. Otherwise, returns NULL.\n  static const FieldTrial::EntropyProvider*\n      GetEntropyProviderForOneTimeRandomization();\n\n  // Helper function should be called only while holding lock_.\n  FieldTrial* PreLockedFind(const std::string& name);\n\n  // Register() stores a pointer to the given trial in a global map.\n  // This method also AddRef's the indicated trial.\n  // This should always be called after creating a new FieldTrial instance.\n  static void Register(FieldTrial* trial);\n\n  // Returns all the registered trials.\n  static RegistrationMap GetRegisteredTrials();\n\n  static FieldTrialList* global_;  // The singleton of this class.\n\n  // This will tell us if there is an attempt to register a field\n  // trial or check if one-time randomization is enabled without\n  // creating the FieldTrialList. This is not an error, unless a\n  // FieldTrialList is created after that.\n  static bool used_without_global_;\n\n  // Lock for access to registered_ and field_trial_allocator_.\n  Lock lock_;\n  RegistrationMap registered_;\n\n  std::map<std::string, std::string> seen_states_;\n\n  // Entropy provider to be used for one-time randomized field trials. If NULL,\n  // one-time randomization is not supported.\n  std::unique_ptr<const FieldTrial::EntropyProvider> entropy_provider_;\n\n  // List of observers to be notified when a group is selected for a FieldTrial.\n  scoped_refptr<ObserverListThreadSafe<Observer> > observer_list_;\n\n  // Single synchronous observer to be notified when a trial group is chosen.\n  Observer* synchronous_observer_ = nullptr;\n\n  // Allocator in shared memory containing field trial data. Used in both\n  // browser and child processes, but readonly in the child.\n  // In the future, we may want to move this to a more generic place if we want\n  // to start passing more data other than field trials.\n  std::unique_ptr<FieldTrialAllocator> field_trial_allocator_ = nullptr;\n\n  // Readonly copy of the region to the allocator. Needs to be a member variable\n  // because it's needed from both CopyFieldTrialStateToFlags() and\n  // AppendFieldTrialHandleIfNeeded().\n  base::ReadOnlySharedMemoryRegion readonly_allocator_region_;\n\n  // Tracks whether CreateTrialsFromCommandLine() has been called.\n  bool create_trials_from_command_line_called_ = false;\n\n  DISALLOW_COPY_AND_ASSIGN(FieldTrialList);\n};\n\n}  // namespace base\n\n#endif  // BASE_METRICS_FIELD_TRIAL_H_\n"
        }, 
        "generated": false, 
        "mime_type": "text/plain", 
        "size": "38895", 
        "type": 1, 
        "md5": "3006f48294e409da83c48378cd053e8e", 
        "codeblock": [
          {
            "modifiers": {}, 
            "type": 11, 
            "name": "base", 
            "text_range": {
              "start_line": 89, 
              "end_line": 819, 
              "start_column": 1, 
              "end_column": 2
            }, 
            "child": [
              {
                "modifiers": {}, 
                "type": 1, 
                "name": "BASE_EXPORT FieldTrial", 
                "text_range": {
                  "start_line": 93, 
                  "end_line": 389, 
                  "start_column": 1, 
                  "end_column": 2
                }, 
                "child": [
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "Probability", 
                    "text_range": {
                      "start_line": 95, 
                      "end_line": 95, 
                      "start_column": 3, 
                      "end_column": 26
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 4, 
                    "name": "RandomizationType", 
                    "text_range": {
                      "start_line": 98, 
                      "end_line": 106, 
                      "start_column": 3, 
                      "end_column": 4
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 1, 
                    "name": "BASE_EXPORT EntropyProvider", 
                    "text_range": {
                      "start_line": 110, 
                      "end_line": 121, 
                      "start_column": 3, 
                      "end_column": 4
                    }, 
                    "child": [
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "GetEntropyForTrial", 
                        "text_range": {
                          "start_line": 119, 
                          "end_line": 120, 
                          "start_column": 5, 
                          "end_column": 77
                        }
                      }
                    ]
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 3, 
                    "name": "ActiveGroup", 
                    "text_range": {
                      "start_line": 124, 
                      "end_line": 127, 
                      "start_column": 3, 
                      "end_column": 4
                    }, 
                    "child": [
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "std", 
                        "text_range": {
                          "start_line": 125, 
                          "end_line": 125, 
                          "start_column": 5, 
                          "end_column": 27
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "std", 
                        "text_range": {
                          "start_line": 126, 
                          "end_line": 126, 
                          "start_column": 5, 
                          "end_column": 27
                        }
                      }
                    ]
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 3, 
                    "name": "BASE_EXPORT State", 
                    "text_range": {
                      "start_line": 133, 
                      "end_line": 141, 
                      "start_column": 3, 
                      "end_column": 4
                    }, 
                    "child": [
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "trial_name", 
                        "text_range": {
                          "start_line": 134, 
                          "end_line": 134, 
                          "start_column": 5, 
                          "end_column": 44
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "activated", 
                        "text_range": {
                          "start_line": 136, 
                          "end_line": 136, 
                          "start_column": 5, 
                          "end_column": 27
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "State", 
                        "text_range": {
                          "start_line": 138, 
                          "end_line": 138, 
                          "start_column": 5, 
                          "end_column": 12
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "State", 
                        "text_range": {
                          "start_line": 139, 
                          "end_line": 139, 
                          "start_column": 5, 
                          "end_column": 30
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "~State", 
                        "text_range": {
                          "start_line": 140, 
                          "end_line": 140, 
                          "start_column": 5, 
                          "end_column": 13
                        }
                      }
                    ]
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 3, 
                    "name": "BASE_EXPORT FieldTrialEntry", 
                    "text_range": {
                      "start_line": 146, 
                      "end_line": 183, 
                      "start_column": 3, 
                      "end_column": 4
                    }, 
                    "child": [
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "kPersistentTypeId", 
                        "text_range": {
                          "start_line": 148, 
                          "end_line": 148, 
                          "start_column": 5, 
                          "end_column": 65
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "kExpectedInstanceSize", 
                        "text_range": {
                          "start_line": 151, 
                          "end_line": 151, 
                          "start_column": 5, 
                          "end_column": 54
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "subtle", 
                        "text_range": {
                          "start_line": 158, 
                          "end_line": 158, 
                          "start_column": 5, 
                          "end_column": 31
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "uint32_t", 
                        "text_range": {
                          "start_line": 161, 
                          "end_line": 161, 
                          "start_column": 5, 
                          "end_column": 25
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 9, 
                        "name": "GetParams", 
                        "text_range": {
                          "start_line": 172, 
                          "end_line": 172, 
                          "start_column": 5, 
                          "end_column": 69
                        }
                      }, 
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "PickleIterator", 
                        "text_range": {
                          "start_line": 176, 
                          "end_line": 176, 
                          "start_column": 5, 
                          "end_column": 45
                        }
                      }
                    ]
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "ActiveGroups", 
                    "text_range": {
                      "start_line": 185, 
                      "end_line": 185, 
                      "start_column": 3, 
                      "end_column": 48
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "kNotFinalized", 
                    "text_range": {
                      "start_line": 189, 
                      "end_line": 189, 
                      "start_column": 3, 
                      "end_column": 33
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "Disable", 
                    "text_range": {
                      "start_line": 198, 
                      "end_line": 198, 
                      "start_column": 3, 
                      "end_column": 17
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AppendGroup", 
                    "text_range": {
                      "start_line": 204, 
                      "end_line": 204, 
                      "start_column": 3, 
                      "end_column": 74
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "trial_name", 
                    "text_range": {
                      "start_line": 207, 
                      "end_line": 207, 
                      "start_column": 3, 
                      "end_column": 64
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "group", 
                    "text_range": {
                      "start_line": 214, 
                      "end_line": 214, 
                      "start_column": 3, 
                      "end_column": 14
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "group_name", 
                    "text_range": {
                      "start_line": 218, 
                      "end_line": 218, 
                      "start_column": 3, 
                      "end_column": 34
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetGroupNameWithoutActivation", 
                    "text_range": {
                      "start_line": 223, 
                      "end_line": 223, 
                      "start_column": 3, 
                      "end_column": 53
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SetForced", 
                    "text_range": {
                      "start_line": 233, 
                      "end_line": 233, 
                      "start_column": 3, 
                      "end_column": 19
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "EnableBenchmarking", 
                    "text_range": {
                      "start_line": 236, 
                      "end_line": 236, 
                      "start_column": 3, 
                      "end_column": 35
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateSimulatedFieldTrial", 
                    "text_range": {
                      "start_line": 248, 
                      "end_line": 252, 
                      "start_column": 3, 
                      "end_column": 28
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "kDefaultGroupNumber", 
                    "text_range": {
                      "start_line": 288, 
                      "end_line": 288, 
                      "start_column": 3, 
                      "end_column": 39
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FieldTrial", 
                    "text_range": {
                      "start_line": 292, 
                      "end_line": 295, 
                      "start_column": 3, 
                      "end_column": 35
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 299, 
                      "end_line": 299, 
                      "start_column": 3, 
                      "end_column": 73
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SetTrialRegistered", 
                    "text_range": {
                      "start_line": 303, 
                      "end_line": 303, 
                      "start_column": 3, 
                      "end_column": 28
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SetGroupChoice", 
                    "text_range": {
                      "start_line": 306, 
                      "end_line": 306, 
                      "start_column": 3, 
                      "end_column": 65
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FinalizeGroupChoice", 
                    "text_range": {
                      "start_line": 311, 
                      "end_line": 311, 
                      "start_column": 3, 
                      "end_column": 29
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FinalizeGroupChoiceImpl", 
                    "text_range": {
                      "start_line": 315, 
                      "end_line": 315, 
                      "start_column": 3, 
                      "end_column": 47
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetStateWhileLocked", 
                    "text_range": {
                      "start_line": 332, 
                      "end_line": 332, 
                      "start_column": 3, 
                      "end_column": 75
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 335, 
                      "end_line": 335, 
                      "start_column": 3, 
                      "end_column": 66
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "trial_name_", 
                    "text_range": {
                      "start_line": 338, 
                      "end_line": 338, 
                      "start_column": 3, 
                      "end_column": 32
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "divisor_", 
                    "text_range": {
                      "start_line": 342, 
                      "end_line": 342, 
                      "start_column": 3, 
                      "end_column": 29
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "default_group_name_", 
                    "text_range": {
                      "start_line": 345, 
                      "end_line": 345, 
                      "start_column": 3, 
                      "end_column": 40
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "Probability", 
                    "text_range": {
                      "start_line": 350, 
                      "end_line": 350, 
                      "start_column": 3, 
                      "end_column": 22
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "Probability", 
                    "text_range": {
                      "start_line": 353, 
                      "end_line": 353, 
                      "start_column": 3, 
                      "end_column": 45
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "next_group_number_", 
                    "text_range": {
                      "start_line": 356, 
                      "end_line": 356, 
                      "start_column": 3, 
                      "end_column": 25
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "group_", 
                    "text_range": {
                      "start_line": 360, 
                      "end_line": 360, 
                      "start_column": 3, 
                      "end_column": 13
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 364, 
                      "end_line": 364, 
                      "start_column": 3, 
                      "end_column": 26
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "enable_field_trial_", 
                    "text_range": {
                      "start_line": 368, 
                      "end_line": 368, 
                      "start_column": 3, 
                      "end_column": 27
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "forced_", 
                    "text_range": {
                      "start_line": 372, 
                      "end_line": 372, 
                      "start_column": 3, 
                      "end_column": 15
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "group_reported_", 
                    "text_range": {
                      "start_line": 375, 
                      "end_line": 375, 
                      "start_column": 3, 
                      "end_column": 23
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "trial_registered_", 
                    "text_range": {
                      "start_line": 379, 
                      "end_line": 379, 
                      "start_column": 3, 
                      "end_column": 25
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "FieldTrialRef", 
                    "text_range": {
                      "start_line": 382, 
                      "end_line": 382, 
                      "start_column": 3, 
                      "end_column": 21
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "enable_benchmarking_", 
                    "text_range": {
                      "start_line": 386, 
                      "end_line": 386, 
                      "start_column": 3, 
                      "end_column": 35
                    }
                  }
                ]
              }, 
              {
                "modifiers": {}, 
                "type": 1, 
                "name": "BASE_EXPORT FieldTrialList", 
                "text_range": {
                  "start_line": 396, 
                  "end_line": 817, 
                  "start_column": 1, 
                  "end_column": 2
                }, 
                "child": [
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "kNoExpirationYear", 
                    "text_range": {
                      "start_line": 406, 
                      "end_line": 406, 
                      "start_column": 3, 
                      "end_column": 31
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 1, 
                    "name": "BASE_EXPORT Observer", 
                    "text_range": {
                      "start_line": 409, 
                      "end_line": 417, 
                      "start_column": 3, 
                      "end_column": 4
                    }, 
                    "child": [
                      {
                        "modifiers": {}, 
                        "type": 8, 
                        "name": "OnFieldTrialGroupFinalized", 
                        "text_range": {
                          "start_line": 412, 
                          "end_line": 413, 
                          "start_column": 5, 
                          "end_column": 79
                        }
                      }
                    ]
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FieldTrialList", 
                    "text_range": {
                      "start_line": 425, 
                      "end_line": 426, 
                      "start_column": 3, 
                      "end_column": 75
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "~FieldTrialList", 
                    "text_range": {
                      "start_line": 429, 
                      "end_line": 429, 
                      "start_column": 3, 
                      "end_column": 20
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FactoryGetFieldTrial", 
                    "text_range": {
                      "start_line": 449, 
                      "end_line": 457, 
                      "start_column": 3, 
                      "end_column": 33
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FactoryGetFieldTrialWithRandomizationSeed", 
                    "text_range": {
                      "start_line": 470, 
                      "end_line": 480, 
                      "start_column": 3, 
                      "end_column": 68
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "Find", 
                    "text_range": {
                      "start_line": 484, 
                      "end_line": 484, 
                      "start_column": 3, 
                      "end_column": 57
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FindValue", 
                    "text_range": {
                      "start_line": 488, 
                      "end_line": 488, 
                      "start_column": 3, 
                      "end_column": 54
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "FindFullName", 
                    "text_range": {
                      "start_line": 496, 
                      "end_line": 496, 
                      "start_column": 3, 
                      "end_column": 65
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "TrialExists", 
                    "text_range": {
                      "start_line": 499, 
                      "end_line": 499, 
                      "start_column": 3, 
                      "end_column": 57
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "IsTrialActive", 
                    "text_range": {
                      "start_line": 502, 
                      "end_line": 502, 
                      "start_column": 3, 
                      "end_column": 59
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "StatesToString", 
                    "text_range": {
                      "start_line": 512, 
                      "end_line": 512, 
                      "start_column": 3, 
                      "end_column": 50
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AllStatesToString", 
                    "text_range": {
                      "start_line": 522, 
                      "end_line": 522, 
                      "start_column": 3, 
                      "end_column": 75
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AllParamsToString", 
                    "text_range": {
                      "start_line": 531, 
                      "end_line": 532, 
                      "start_column": 3, 
                      "end_column": 72
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetActiveFieldTrialGroups", 
                    "text_range": {
                      "start_line": 538, 
                      "end_line": 539, 
                      "start_column": 3, 
                      "end_column": 47
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetActiveFieldTrialGroupsFromString", 
                    "text_range": {
                      "start_line": 542, 
                      "end_line": 544, 
                      "start_column": 3, 
                      "end_column": 47
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetInitiallyActiveFieldTrials", 
                    "text_range": {
                      "start_line": 550, 
                      "end_line": 552, 
                      "start_column": 3, 
                      "end_column": 47
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromString", 
                    "text_range": {
                      "start_line": 563, 
                      "end_line": 565, 
                      "start_column": 3, 
                      "end_column": 56
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromCommandLine", 
                    "text_range": {
                      "start_line": 575, 
                      "end_line": 577, 
                      "start_column": 3, 
                      "end_column": 54
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateFeaturesFromCommandLine", 
                    "text_range": {
                      "start_line": 581, 
                      "end_line": 585, 
                      "start_column": 3, 
                      "end_column": 33
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AppendFieldTrialHandleIfNeeded", 
                    "text_range": {
                      "start_line": 591, 
                      "end_line": 592, 
                      "start_column": 3, 
                      "end_column": 45
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "InsertFieldTrialHandleIfNeeded", 
                    "text_range": {
                      "start_line": 598, 
                      "end_line": 599, 
                      "start_column": 3, 
                      "end_column": 48
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetFieldTrialDescriptor", 
                    "text_range": {
                      "start_line": 605, 
                      "end_line": 605, 
                      "start_column": 3, 
                      "end_column": 39
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "DuplicateFieldTrialSharedMemoryForTesting", 
                    "text_range": {
                      "start_line": 607, 
                      "end_line": 608, 
                      "start_column": 3, 
                      "end_column": 46
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CopyFieldTrialStateToFlags", 
                    "text_range": {
                      "start_line": 615, 
                      "end_line": 618, 
                      "start_column": 3, 
                      "end_column": 70
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateFieldTrial", 
                    "text_range": {
                      "start_line": 626, 
                      "end_line": 627, 
                      "start_column": 3, 
                      "end_column": 69
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AddObserver", 
                    "text_range": {
                      "start_line": 633, 
                      "end_line": 633, 
                      "start_column": 3, 
                      "end_column": 46
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "RemoveObserver", 
                    "text_range": {
                      "start_line": 636, 
                      "end_line": 636, 
                      "start_column": 3, 
                      "end_column": 49
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SetSynchronousObserver", 
                    "text_range": {
                      "start_line": 647, 
                      "end_line": 647, 
                      "start_column": 3, 
                      "end_column": 57
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "RemoveSynchronousObserver", 
                    "text_range": {
                      "start_line": 650, 
                      "end_line": 650, 
                      "start_column": 3, 
                      "end_column": 60
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "OnGroupFinalized", 
                    "text_range": {
                      "start_line": 654, 
                      "end_line": 654, 
                      "start_column": 3, 
                      "end_column": 72
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "NotifyFieldTrialGroupSelection", 
                    "text_range": {
                      "start_line": 657, 
                      "end_line": 657, 
                      "start_column": 3, 
                      "end_column": 70
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetFieldTrialCount", 
                    "text_range": {
                      "start_line": 660, 
                      "end_line": 660, 
                      "start_column": 3, 
                      "end_column": 37
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetParamsFromSharedMemory", 
                    "text_range": {
                      "start_line": 665, 
                      "end_line": 667, 
                      "start_column": 3, 
                      "end_column": 50
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "ClearParamsFromSharedMemoryForTesting", 
                    "text_range": {
                      "start_line": 670, 
                      "end_line": 670, 
                      "start_column": 3, 
                      "end_column": 54
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "DumpAllFieldTrialsToPersistentAllocator", 
                    "text_range": {
                      "start_line": 674, 
                      "end_line": 675, 
                      "start_column": 3, 
                      "end_column": 44
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetAllFieldTrialsFromPersistentAllocator", 
                    "text_range": {
                      "start_line": 680, 
                      "end_line": 682, 
                      "start_column": 3, 
                      "end_column": 50
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "IsGlobalSetForTesting", 
                    "text_range": {
                      "start_line": 685, 
                      "end_line": 685, 
                      "start_column": 3, 
                      "end_column": 38
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SerializeSharedMemoryRegionMetadata", 
                    "text_range": {
                      "start_line": 697, 
                      "end_line": 697, 
                      "start_column": 3, 
                      "end_column": 55
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "SerializeSharedMemoryRegionMetadata", 
                    "text_range": {
                      "start_line": 704, 
                      "end_line": 705, 
                      "start_column": 3, 
                      "end_column": 51
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "DeserializeSharedMemoryRegionMetadata", 
                    "text_range": {
                      "start_line": 708, 
                      "end_line": 709, 
                      "start_column": 3, 
                      "end_column": 39
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "DeserializeSharedMemoryRegionMetadata", 
                    "text_range": {
                      "start_line": 711, 
                      "end_line": 713, 
                      "start_column": 3, 
                      "end_column": 39
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromSwitchValue", 
                    "text_range": {
                      "start_line": 722, 
                      "end_line": 722, 
                      "start_column": 3, 
                      "end_column": 75
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromDescriptor", 
                    "text_range": {
                      "start_line": 728, 
                      "end_line": 729, 
                      "start_column": 3, 
                      "end_column": 74
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromSharedMemoryRegion", 
                    "text_range": {
                      "start_line": 735, 
                      "end_line": 736, 
                      "start_column": 3, 
                      "end_column": 58
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "CreateTrialsFromSharedMemoryMapping", 
                    "text_range": {
                      "start_line": 743, 
                      "end_line": 744, 
                      "start_column": 3, 
                      "end_column": 53
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "InstantiateFieldTrialAllocatorIfNeeded", 
                    "text_range": {
                      "start_line": 749, 
                      "end_line": 749, 
                      "start_column": 3, 
                      "end_column": 55
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "AddToAllocatorWhileLocked", 
                    "text_range": {
                      "start_line": 753, 
                      "end_line": 754, 
                      "start_column": 3, 
                      "end_column": 65
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "ActivateFieldTrialEntryWhileLocked", 
                    "text_range": {
                      "start_line": 757, 
                      "end_line": 757, 
                      "start_column": 3, 
                      "end_column": 74
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "RegistrationMap", 
                    "text_range": {
                      "start_line": 760, 
                      "end_line": 760, 
                      "start_column": 3, 
                      "end_column": 61
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetEntropyProviderForOneTimeRandomization", 
                    "text_range": {
                      "start_line": 764, 
                      "end_line": 765, 
                      "start_column": 3, 
                      "end_column": 50
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "PreLockedFind", 
                    "text_range": {
                      "start_line": 768, 
                      "end_line": 768, 
                      "start_column": 3, 
                      "end_column": 53
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "Register", 
                    "text_range": {
                      "start_line": 773, 
                      "end_line": 773, 
                      "start_column": 3, 
                      "end_column": 42
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 8, 
                    "name": "GetRegisteredTrials", 
                    "text_range": {
                      "start_line": 776, 
                      "end_line": 776, 
                      "start_column": 3, 
                      "end_column": 47
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "global_", 
                    "text_range": {
                      "start_line": 778, 
                      "end_line": 778, 
                      "start_column": 3, 
                      "end_column": 33
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "used_without_global_", 
                    "text_range": {
                      "start_line": 784, 
                      "end_line": 784, 
                      "start_column": 3, 
                      "end_column": 35
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "Lock", 
                    "text_range": {
                      "start_line": 787, 
                      "end_line": 787, 
                      "start_column": 3, 
                      "end_column": 13
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "RegistrationMap", 
                    "text_range": {
                      "start_line": 788, 
                      "end_line": 788, 
                      "start_column": 3, 
                      "end_column": 30
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 790, 
                      "end_line": 790, 
                      "start_column": 3, 
                      "end_column": 50
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 794, 
                      "end_line": 794, 
                      "start_column": 3, 
                      "end_column": 71
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "scoped_refptr", 
                    "text_range": {
                      "start_line": 797, 
                      "end_line": 797, 
                      "start_column": 3, 
                      "end_column": 66
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "synchronous_observer_", 
                    "text_range": {
                      "start_line": 800, 
                      "end_line": 800, 
                      "start_column": 3, 
                      "end_column": 44
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "std", 
                    "text_range": {
                      "start_line": 806, 
                      "end_line": 806, 
                      "start_column": 3, 
                      "end_column": 72
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "base", 
                    "text_range": {
                      "start_line": 811, 
                      "end_line": 811, 
                      "start_column": 3, 
                      "end_column": 62
                    }
                  }, 
                  {
                    "modifiers": {}, 
                    "type": 9, 
                    "name": "create_trials_from_command_line_called_", 
                    "text_range": {
                      "start_line": 814, 
                      "end_line": 814, 
                      "start_column": 3, 
                      "end_column": 55
                    }
                  }
                ]
              }
            ]
          }
        ]
      }, 
      "return_code": 1
    }
  ]
}